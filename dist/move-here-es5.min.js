var MoveHere=function(t){"use strict";function i(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function n(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}var e=function(){function t(t){var i=void 0===t?{}:t,n=i.x,e=void 0===n?0:n,o=i.y,r=void 0===o?-0:o,a=i.width,s=void 0===a?0:a,h=i.height,u=void 0===h?0:h;this._x=e,this._y=r,this._width=s,this._height=u,this._halfWidth=s/2,this._halfHeight=u/2,this._eighthWidth=s/8,this._eighthHeight=u/8}return n(t,[{key:"x",set:function(t){this._x=t},get:function(){return this._x}},{key:"y",set:function(t){this._y=t},get:function(){return this._y}},{key:"width",set:function(t){this._width=t,this._halfWidth=t/2,this._eighthWidth=t/8},get:function(){return this._width}},{key:"height",set:function(t){this._height=t,this._halfHeight=t/2,this._eighthHeight=t/8},get:function(){return this._height}},{key:"halfWidth",get:function(){return this._halfWidth}},{key:"halfHeight",get:function(){return this._halfHeight}},{key:"eighthWidth",get:function(){return this._eighthWidth}},{key:"eighthHeight",get:function(){return this._eighthHeight}}]),t}(),o=Object.defineProperties({},{CURVE_RANDOM:{enumerable:!0,value:"curveRandom"}}),r=Math.PI/180,a=180/Math.PI,s=function(){function t(){}return t.radians=function(t){return r*t},t.degrees=function(t){return a*t},t.normalizeAngle=function(t){if(t>360)for(;t>360;)t-=360;else if(t<-360)for(;t<-360;)t+=360;return t},t.getMinAngleDiff=function(t,i){if(t<=0&&i>=0||t>=0&&i<=0){var n=t>0?t:-t,e=i>0?i:-i,o=180-n,r=180-e;return Math.min(o+r,n+e)}var a=t-i;return a>0?a:-a},t.convertRotationToAngle=function(i,n,e){var o;return o=n>=0&&e<0?90+i:n>=0&&e>=0?i-90:n<0&&e>=0?i+270:i+90,t.normalizeAngle(o)},t.convertAngleToRotation=function(t,i,n){return i>=0&&n<0?90-t:i>=0&&n>=0?90+t:i<0&&n>=0?-270+t:90-t},t.distanceBetweenTwoPoints=function(t,i,n,e){return Math.sqrt((t-n)*(t-n)+(i-e)*(i-e))},t.getRandomPointInsideRect=function(t,i,n){void 0===n&&(n=!0);var e={min:0,max:0},o={min:0,max:0},r={x:0,y:0};return n?(t.x<i.x+i.halfWidth?(e.min=i.eighthWidth,e.max=i.halfWidth-e.min):(e.min=-i.eighthWidth,e.max=-i.halfWidth-e.min),t.y<i.y+i.halfHeight?(o.min=i.eighthHeight,o.max=i.halfHeight-o.min):(o.min=-i.eighthHeight,o.max=-i.halfHeight-o.min)):(e.min=i.x,e.max=i.width,o.min=i.y,o.max=i.height),r.x=t.x+Math.round(e.min+Math.random()*e.max),r.y=t.y+Math.round(o.min+Math.random()*o.max),r.x>i.x+i.width?r.x=i.x+i.width:r.x<i.x&&(r.x=i.x),r.y>i.y+i.height?r.y=i.y+i.height:r.y<i.y&&(r.y=i.y),r},t.getRandomPointOutsideRect=function(t,i){var n={x:0,y:0};switch(Math.floor(4*Math.random())){case 0:n.x=i.x-t.width,n.y=i.y+Math.round(Math.random()*i.height);break;case 1:n.x=i.x+Math.round(Math.random()*i.width),n.y=i.y-t.height;break;case 2:n.x=i.x+i.width+t.width,n.y=i.y+Math.round(Math.random()*i.height);break;case 3:n.x=i.x+Math.round(Math.random()*i.width),n.y=i.y+i.height+t.height}return n},t}(),h=Object.freeze({BORN:"born",ALIVE:"alive",DYING:"dying",DEAD:"dead"}),u=function(t,i,n){var e;e="inside"===n?s.getRandomPointInsideRect(t,i):s.getRandomPointOutsideRect(t,i),t.destinationX=e.x,t.destinationY=e.y},c=function(t){t.acquireRotationDirection=!0,t.rotationAmount=0},d=function(t,i){if(t.simulateDepth){var n=.5+(t.y-i.y)/i.height*1;n<.5&&(n=.5),n>1.5&&(n=1.5),t.scaleX=n,t.scaleY=n}},g=function(){function t(t){this._boundingRectangle=t,this._motionAssets={}}var i=t.prototype;return i.addAsset=function(t){var i;i="inside"===t.spawnLocation?s.getRandomPointInsideRect(t,t.boundingRectangle||this._boundingRectangle,!1):s.getRandomPointOutsideRect(t,t.boundingRectangle||this._boundingRectangle),t.x=i.x,t.y=i.y,u(t,t.boundingRectangle||this._boundingRectangle,"inside"),c(t),d(t,this._boundingRectangle),t.status=h.ALIVE,this._motionAssets[t.id]=t},i.update=function(t){var i,n,e=this;Object.keys(this._motionAssets).forEach(function(o){(function(t,i,n){t.status===h.ALIVE&&-1!==t.duration&&i-t.initTime>=t.duration&&(u(t,n,"outside"),c(t),t.status=h.DYING)})(i=e._motionAssets[o],t,i.boundingRectangle||e._boundingRectangle),n=function(t){var i={};return i.x=t.destinationX-t.x,i.y=t.destinationY-t.y,i}(i),d(i,e._boundingRectangle),function(t,i){var n=s.distanceBetweenTwoPoints(t.x,t.y,t.destinationX,t.destinationY);if(0!==n){var e=t.rotation,o=Math.round(s.degrees(Math.acos(i.x/n))),r=s.convertAngleToRotation(o,i.x,i.y);if(s.getMinAngleDiff(r,e)<=t.rotationPerFrame)e=r;else{t.acquireRotationDirection&&(t.acquireRotationDirection=!1,t.rotationDirection=o<e?-1:1);var a=t.rotationAmount/360<=1?1:t.rotationAmount/360;e+=t.rotationDirection*t.rotationPerFrame*a,e=s.normalizeAngle(e)}t.rotationAmount+=s.getMinAngleDiff(t.rotation,e),t.rotation=e}}(i,n),function(t,i){if(Math.abs(i.x)<t.unitsPerFrame&&Math.abs(i.y)<t.unitsPerFrame)t.status===h.DYING&&(t.status=h.DEAD),t.x=t.destinationX,t.y=t.destinationY;else{var n=s.radians(s.convertRotationToAngle(t.rotation,i.x,i.y));i.y<0?(t.x-=Math.cos(n)*t.unitsPerFrame,t.y-=Math.sin(n)*t.unitsPerFrame):(t.x+=Math.cos(n)*t.unitsPerFrame,t.y+=Math.sin(n)*t.unitsPerFrame)}}(i,n),function(t){return t.x===t.destinationX&&t.y===t.destinationY}(i)&&(u(i,i.boundingRectangle||e._boundingRectangle,"inside"),c(i)),i.status===h.DEAD&&delete e._motionAssets[o]})},t}(),_=function(){function t(){this._requestAnimationId=null,this._paused=!0,this._currentTime=0,this._lastTime=0,this._timeInMilliseconds=0,this._timeUpdateHandlers=[]}var i=t.prototype;return i._tick=function(){var t=this;this._requestAnimationId=null,this._currentTime=performance.now(),this._timeInMilliseconds+=this._currentTime-this._lastTime,this._lastTime=this._currentTime,this._timeUpdateHandlers.every(function(i){return i(t._timeInMilliseconds)}),this._paused||(this._requestAnimationId=requestAnimationFrame(function(){return t._tick()}))},i.addTimeUpdateListener=function(t){this._timeUpdateHandlers.push(t)},i.play=function(){var t=this;this._paused=!1,this._lastTime=performance.now(),this._requestAnimationId=requestAnimationFrame(function(){return t._tick()})},i.pause=function(){this._requestAnimationId&&(cancelAnimationFrame(this._requestAnimationId),this._requestAnimationId=null),this._paused=!0},n(t,[{key:"paused",get:function(){return this._paused}},{key:"time",get:function(){return this._timeInMilliseconds}}]),t}(),f=0,m=function(){function t(){}return t.getId=function(){return f++},t}(),l=60,y=1,x=function(){function t(t,i,n,e,o,r,a,s,u,c){void 0===c&&(c=null),this._id=m.getId(),this._target=t,this._initTimeInMilliseconds=i,this._duration=n,this._unitsPerSecond=e,this._rotationPerSecond=o,this._rotationPerFrame=o/l,this._motionDirection=r,this._rotateToDirection=a,this._unitsPerFrame=e/l,this._simulateDepth=s,this._spawnLocation=u,this._acquireRotationDirection=!1,this._destinationX=0,this._destinationY=0,this._status=h.BORN,this._rotationAmount=0,this._rotationDirection=1,this._rotationProxy=0,this._boundingRectangle=c,this._rotationPerFrame<y&&(this._rotationPerFrame=y)}return n(t,[{key:"id",get:function(){return this._id}},{key:"target",get:function(){return this._target}},{key:"duration",get:function(){return this._duration}},{key:"unitsPerSecond",get:function(){return this._unitsPerSecond}},{key:"unitsPerFrame",get:function(){return this._unitsPerFrame}},{key:"status",set:function(t){this._status=t},get:function(){return this._status}},{key:"initTime",set:function(t){this._initTimeInMilliseconds=t},get:function(){return this._initTimeInMilliseconds}},{key:"x",set:function(t){this._target.x=t},get:function(){return this._target.x}},{key:"y",set:function(t){this._target.y=t},get:function(){return this._target.y}},{key:"width",get:function(){return this._target.width||0}},{key:"height",get:function(){return this._target.height||0}},{key:"rotation",set:function(t){this._rotateToDirection?this._target.rotation=t:this._rotationProxy=t},get:function(){return this._rotateToDirection?this._target.rotation:this._rotationProxy}},{key:"destinationX",set:function(t){this._destinationX=t},get:function(){return this._destinationX}},{key:"destinationY",set:function(t){this._destinationY=t},get:function(){return this._destinationY}},{key:"rotationPerSecond",get:function(){return this._rotationPerSecond}},{key:"rotationPerFrame",get:function(){return this._rotationPerFrame}},{key:"motionDirection",get:function(){return this._motionDirection}},{key:"rotateToDirection",set:function(t){this._rotateToDirection=t},get:function(){return this._rotateToDirection}},{key:"acquireRotationDirection",set:function(t){this._acquireRotationDirection=t},get:function(){return this._acquireRotationDirection}},{key:"rotationAmount",set:function(t){this._rotationAmount=t},get:function(){return this._rotationAmount}},{key:"rotationDirection",set:function(t){this._rotationDirection=t},get:function(){return this._rotationDirection}},{key:"simulateDepth",set:function(t){this._simulateDepth=t},get:function(){return this._simulateDepth}},{key:"spawnLocation",set:function(t){this._spawnLocation=t},get:function(){return this._spawnLocation}},{key:"boundingRectangle",get:function(){return this._boundingRectangle}}]),t}(),p=function(){function t(t){void 0===t&&(t=new e),this._boundingRectangle=t,this._timer=new _,this._adaptersMap={};var i=new g(this._boundingRectangle);this._timer.addTimeUpdateListener(i.update.bind(i)),this._adaptersMap[o.CURVE_RANDOM]=i}var i=t.prototype;return i.start=function(){this._timer.play()},i.stop=function(){this._timer.pause()},i.addAsset=function(t){var i=void 0===t?{}:t,n=i.target,e=void 0===n?null:n,r=i.motionDirection,a=void 0===r?o.CURVE_RANDOM:r,s=i.duration,h=void 0===s?2e3:s,u=i.unitsPerSecond,c=void 0===u?30:u,d=i.rotationSpeedModifier,g=void 0===d?1:d,_=i.rotateToDirection,f=void 0===_||_,m=i.simulateDepth,l=void 0!==m&&m,y=i.spawnLocation,p=void 0===y?"outside":y,v=i.boundingRectangle,R=void 0===v?null:v,M=this._adaptersMap[a];if(!M)throw new Error("MotionEngine - No motion adapter found with supplied motion direction of ("+a+")");var D=Math.round(c*g),A=new x(e,this._timer.time,h,c,D,a,f,l,p,R);return M.addAsset(A),A},n(t,[{key:"paused",get:function(){return this._timer.paused}}]),t}();return t.MotionDirection=o,t.Rectangle=e,t.MotionEngine=p,t}({});
//# sourceMappingURL=move-here-es5.min.js.map
